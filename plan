
# âœ… **Module 3 â€” GSAP Frame Adapter & Transition Pack (Unified Version)**

**Tá»‘i Æ°u cho: 1 gallery preview chung + khÃ´ng thÃªm folder.**

---

# ğŸ¯ **1. Module nÃ y lÃ m gÃ¬ (tá»•ng quÃ¡t báº£n má»›i)**

Module 3 xá»­ lÃ½ hai viá»‡c:

---

## **A) ThÃªm GSAP Engine vÃ o system effects (khÃ´ng thÃªm thÆ° má»¥c má»›i)**

NÃ³ bá»• sung:

* `GsapAdapter.ts` â†’ trong `src/effects/engines/gsap/`
* `GsapEffect.tsx` â†’ wrapper chuáº©n trong engine
* CÃ¡c primitive GSAP effect â†’ bá» vÃ o `src/effects/engines/gsap/*`

â†’ CÃ¡c effect GSAP sáº½ trá»Ÿ thÃ nh **má»™t loáº¡i effect** trong há»‡ thá»‘ng tá»•ng thá»ƒ.

---

## **B) Build Motion + Transition Pack dÃ¹ng GSAP**

NhÆ°ng táº¥t cáº£ output **Ä‘á»u Ä‘áº·t vÃ o thÆ° má»¥c Ä‘Ã£ cÃ³**:

```
src/effects/components/motion/
src/effects/components/transition/
```

â†’ NhÆ° cÃ¡ch báº¡n Ä‘ang lÃ m.

---

## **C) Preview cho táº¥t cáº£ effects chung má»™t chá»—**

Preview UI duy nháº¥t:

```
src/effects/preview/EffectGallery.tsx
```

â†’ Gallery sáº½ Ä‘á»c tá»« `effects.json`, khÃ´ng quan tÃ¢m effect lÃ  GSAP hay Lottie hay Native.

---

# ğŸ§© **2. SOP chi tiáº¿t (Ä‘Ã£ tá»‘i Æ°u theo kiáº¿n trÃºc má»›i)**

---

# **STEP 1 â€” ThÃªm GSAP Adapter**

Táº¡o 2 file:

```
src/effects/engines/gsap/GsapAdapter.ts
src/effects/engines/gsap/useGsapFrame.ts
```

Nhiá»‡m vá»¥:

* Convert **timeline â†’ frame-based** cho Remotion
* Cho phÃ©p má»i GSAP effect cháº¡y chÃ­nh xÃ¡c tá»«ng frame

---

# **STEP 2 â€” Táº¡o GsapEffect Wrapper**

File:

```
src/effects/engines/gsap/GsapEffect.tsx
```

Nhiá»‡m vá»¥:

* Äá»‹nh nghÄ©a API chuáº©n cho táº¥t cáº£ GSAP effects
* Bá»c children Ä‘á»ƒ apply GSAP animation

---

# **STEP 3 â€” Build Motion Pack (dÃ¹ng GSAPEffect)**

ThÃªm file vÃ o thÆ° má»¥c hiá»‡n cÃ³:

```
src/effects/components/motion/FadeIn.tsx
src/effects/components/motion/SlideUp.tsx
src/effects/components/motion/ZoomIn.tsx
...
```

---

# **STEP 4 â€” Build Transition Pack**

ThÃªm file vÃ o thÆ° má»¥c:

```
src/effects/components/transition/CrossFade.tsx
src/effects/components/transition/Wipe.tsx
src/effects/components/transition/ZoomFocus.tsx
```

---

# **STEP 5 â€” Generate Metadata (update existing script)**

Script cáº§n update:

```
scripts/generateEffectRegistry.ts
```

Nhiá»‡m vá»¥:

* QuÃ©t thÆ° má»¥c `src/effects/components/**`
* Nháº­n diá»‡n effect engine (gsap/lottie/native)
* Update file:

```
src/effects/registry/effects.json
```

---

# **STEP 6 â€” Update useEffectByKey**

Trong:

```
src/effects/hooks/useEffectByKey.ts
```

ThÃªm:

```ts
if (effect.engine === "gsap") {
  return dynamicImport(effect.path)
}
```

---

# **STEP 7 â€” Preview táº¥t cáº£ Effect chung 1 gallery**

KhÃ´ng táº¡o file má»›i.

Update:

```
src/effects/preview/EffectGallery.tsx
```

Gallery load tá»«:

```
src/effects/registry/effects.json
```

â†’ Lottie, GSAP, Native **táº¥t cáº£ hiá»ƒn thá»‹ chung**.

---

# ğŸ“Œ **3. Checklist hoÃ n táº¥t module 3 (phiÃªn báº£n unified)**

### ğŸ”§ GSAP Adapter

* [ ] CÃ³ file GsapAdapter.ts
* [ ] CÃ³ file useGsapFrame.ts
* [ ] Timeline â†’ frame hoáº¡t Ä‘á»™ng Ä‘Ãºng

### ğŸ¬ GSAPEffect Wrapper

* [ ] Nháº­n props
* [ ] Apply timeline Ä‘Ãºng
* [ ] DÃ¹ng Ä‘Æ°á»£c trong má»i effect

### ğŸ¨ Motion Pack

* [ ] FadeIn
* [ ] SlideUp
* [ ] SlidePan
* [ ] ZoomFocus
* [ ] ZoomIn
* [ ] RotateIn
* [ ] etc.

### âš¡ Transition Pack

* [ ] CrossFade
* [ ] ZoomFocus
* [ ] Wipe
* [ ] MotionBlurSlide

### ğŸ§­ Manifest

* [ ] effects.json sinh Ä‘Ãºng
* [ ] CÃ³ engine="gsap"
* [ ] Path chÃ­nh xÃ¡c

### ğŸ–¼ Unified Preview

* [ ] Má»™t gallery duy nháº¥t
* [ ] Preview Ä‘Æ°á»£c GSAP
* [ ] Preview Ä‘Æ°á»£c Lottie
* [ ] Preview Ä‘Æ°á»£c Native
* [ ] Hiá»ƒn thá»‹ Ä‘Ãºng thumbnail + tag + category

### ğŸ”Œ TÃ­ch há»£p Template

* [ ] <Effect name="motion.slideUp"> hoáº¡t Ä‘á»™ng
* [ ] Plan JSON apply effect Ä‘Æ°á»£c

---

# ğŸ **4. Output cá»§a Module 3**

### **ğŸ“¦ A. Engine**

```
src/effects/engines/gsap/GsapAdapter.ts
src/effects/engines/gsap/GsapEffect.tsx
src/effects/engines/gsap/useGsapFrame.ts
```

### **ğŸ“¦ B. GSAP Effects**

```
src/effects/components/motion/*
src/effects/components/transition/*
```

### **ğŸ“¦ C. Updated Manifest**

```
src/effects/registry/effects.json
```

### **ğŸ“¦ D. Unified Preview**

Gallery cÅ© Ä‘Æ°á»£c bá»• sung há»— trá»£ GSAP.

---

# ğŸ§ª **5. CÃ¡ch test module nÃ y**

### **Test 1 â€” cháº¡y GSAP hiá»‡u á»©ng trÃªn Remotion**

* FadeIn pháº£i cháº¡y tá»« opacity 0 â†’ 1
* SlideUp pháº£i cháº¡y mÆ°á»£t, khÃ´ng jitter

### **Test 2 â€” preview gallery**

Gallery hiá»ƒn thá»‹ tháº»:

* FadeIn
* SlideUp
* Confetti (lottie)
* Sparkle (lottie)

â†’ Táº¥t cáº£ cháº¡y Ä‘Æ°á»£c.

### **Test 3 â€” apply vÃ o template**

Trong Template0:

```tsx
<Effect name="motion.fadeIn">
   <Title />
</Effect>
```

Render thá»­ â†’ Náº¿u title fade Ä‘Ãºng â†’ OK.

---

# â¤ Báº¡n muá»‘n mÃ¬nh viáº¿t code máº«u cho GsapAdapter + GsapEffect khÃ´ng?

Náº¿u báº¡n muá»‘n, mÃ¬nh sáº½ viáº¿t full code sáºµn cháº¡y.
